{
    "type": "Ext.container.Viewport",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "designer|userAlias": "vwprtlogin",
        "designer|userClassName": "vwprtLogin",
        "layout": "fit"
    },
    "configAlternates": {
        "designer|initialView": "boolean",
        "designer|userAlias": "string",
        "designer|userClassName": "string",
        "layout": "string"
    },
    "name": "MyViewport",
    "designerId": "71e2a9ae-3e25-4c7a-b510-dff7da6b49ab",
    "viewControllerInstanceId": "3cd2e603-2c3c-42f3-9ee0-f5daa658fbcc",
    "viewModelInstanceId": "642f97ae-6eb8-48a0-8bfa-6a0317092b8d",
    "cn": [
        {
            "type": "Ext.panel.Panel",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "bodyStyle": [
                    "background-color:#666666"
                ],
                "layout": "center"
            },
            "configAlternates": {
                "bodyStyle": "object",
                "layout": "string"
            },
            "name": "MyPanel2",
            "designerId": "c44f06a3-2d54-4a33-9643-22abeb473b44",
            "cn": [
                {
                    "type": "Ext.panel.Panel",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "height": 250,
                        "layout": "border",
                        "title": "",
                        "width": 600
                    },
                    "configAlternates": {
                        "height": "auto",
                        "layout": "string",
                        "title": "string",
                        "width": "auto"
                    },
                    "name": "MyPanel",
                    "designerId": "e6462ff5-52b8-403c-a300-0034c977b4b3",
                    "cn": [
                        {
                            "type": "Ext.panel.Panel",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "container|align": "stretch",
                                "layout": "vbox",
                                "layout|region": "west",
                                "title": "",
                                "width": 207
                            },
                            "configAlternates": {
                                "container|align": "string",
                                "layout": "string",
                                "layout|region": "string",
                                "title": "string",
                                "width": "auto"
                            },
                            "name": "MyPanel1",
                            "designerId": "557f1ee1-b68d-4632-899e-d4faaa42c9c0"
                        },
                        {
                            "type": "Ext.form.Panel",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "bodyPadding": 10,
                                "container|align": "center",
                                "container|pack": "center",
                                "id": "FormaLogin",
                                "layout": "vbox",
                                "layout|region": "center",
                                "title": ""
                            },
                            "configAlternates": {
                                "bodyPadding": "auto",
                                "container|align": "string",
                                "container|pack": "string",
                                "layout": "string",
                                "layout|region": "string",
                                "title": "string",
                                "id": "string"
                            },
                            "name": "MyForm",
                            "designerId": "55bc8084-e0c9-441b-8f9f-23ec507ee356",
                            "cn": [
                                {
                                    "type": "Ext.form.field.Text",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "fieldLabel": "Usuario",
                                        "margin": "20 20 20 20",
                                        "name": "usuario"
                                    },
                                    "configAlternates": {
                                        "fieldLabel": "string",
                                        "margin": "auto",
                                        "name": "string"
                                    },
                                    "name": "MyTextField",
                                    "designerId": "f9232c4f-5345-4996-ae29-5c4dbc06838f"
                                },
                                {
                                    "type": "Ext.form.field.Text",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "fieldLabel": "Contraseña",
                                        "inputType": "password",
                                        "margin": "0 20 20 20",
                                        "name": "clave"
                                    },
                                    "configAlternates": {
                                        "fieldLabel": "string",
                                        "margin": "auto",
                                        "inputType": "string",
                                        "name": "string"
                                    },
                                    "name": "MyTextField1",
                                    "designerId": "140f3892-fa2c-451b-9f8e-ae8e04e0935a",
                                    "cn": [
                                        {
                                            "type": "viewcontrollereventbinding",
                                            "reference": {
                                                "name": "listeners",
                                                "type": "array"
                                            },
                                            "codeClass": null,
                                            "userConfig": {
                                                "fn": "onTextfieldSpecialkey",
                                                "implHandler": [
                                                    "if(e.getKey() == e.ENTER)",
                                                    "        {",
                                                    "            this.onButtonClick();",
                                                    "        }"
                                                ],
                                                "name": "specialkey",
                                                "scope": "me"
                                            },
                                            "configAlternates": {
                                                "fn": "string",
                                                "implHandler": "code",
                                                "name": "string",
                                                "scope": "string"
                                            },
                                            "name": "onTextfieldSpecialkey",
                                            "designerId": "60ca7989-2f12-462e-90c6-b80abfb42753"
                                        }
                                    ]
                                },
                                {
                                    "type": "Ext.button.Button",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "margin": "0 20 20 20",
                                        "text": "Aceptar"
                                    },
                                    "configAlternates": {
                                        "margin": "auto",
                                        "text": "string"
                                    },
                                    "name": "MyButton",
                                    "designerId": "8ddb5b9e-f487-461a-86c0-44e1e3e66ac2",
                                    "cn": [
                                        {
                                            "type": "viewcontrollereventbinding",
                                            "reference": {
                                                "name": "listeners",
                                                "type": "array"
                                            },
                                            "codeClass": null,
                                            "userConfig": {
                                                "fn": "onButtonClick",
                                                "implHandler": [
                                                    "var forma = this.getView().down('#FormaLogin').getForm();",
                                                    "if(forma.isValid())",
                                                    "{",
                                                    "    forma.submit(",
                                                    "        {",
                                                    "            url: '../servidor/login/revisa',",
                                                    "            method: 'post',",
                                                    "            scope: this,",
                                                    "            success: function(response, opts)",
                                                    "            {",
                                                    "                var responseData = opts.result.data;",
                                                    "",
                                                    "                VERIFICADO = responseData.verified;",
                                                    "                USUARIO = responseData.usuario_apps;",
                                                    "                NOMBRE = responseData.nombre_apps;",
                                                    "",
                                                    "                if(VERIFICADO === true){",
                                                    "",
                                                    "",
                                                    "                    this.getView().destroy();",
                                                    "                    Ext.create('reservas_puce.view.vwprtPrincipal', {renderTo: Ext.getBody()});",
                                                    "                    Ext.getCmp('dplyNombre').setText(NOMBRE);",
                                                    "                    ROl = responseData.rolAp_apps;",
                                                    "                    var storeTipo = Ext.getStore('Tipo');",
                                                    "                    storeTipo.load();",
                                                    "                    var storeEstado = Ext.getStore('Estado');",
                                                    "                    storeEstado.load();",
                                                    "                    Ext.getCmp('mnUsuario').setVisible(false);",
                                                    "                    Ext.getCmp('mnTipo').setVisible(false);",
                                                    "                    Ext.getCmp('mnLugar').setVisible(false);",
                                                    "                    Ext.getCmp('mnHorario').setVisible(false);",
                                                    "                    if(ROl !== null)",
                                                    "                    {",
                                                    "                        var ROL = new Array(ROl.length);",
                                                    "                        for(i=0;i<ROl.length;i++)",
                                                    "                        {",
                                                    "                            ROL[i]=parseInt(ROl[i].id_rol);",
                                                    "                        }",
                                                    "                        if(Ext.Array.contains(ROL, 4)===true){",
                                                    "                            Ext.getCmp('mnUsuario').setVisible(true);",
                                                    "                        }",
                                                    "                        if(Ext.Array.contains(ROL, 5)===true){",
                                                    "                            Ext.getCmp('mnTipo').setVisible(true);",
                                                    "                        }",
                                                    "                        if(Ext.Array.contains(ROL, 2)===true){",
                                                    "                            Ext.getCmp('mnLugar').setVisible(true);",
                                                    "                        }",
                                                    "                        if(Ext.Array.contains(ROL, 1)===true){",
                                                    "                            Ext.getCmp('mnHorario').setVisible(true);",
                                                    "                        }",
                                                    "                    }",
                                                    "                }else{",
                                                    "                    Ext.Msg.show({",
                                                    "                        title:'Error',",
                                                    "                        msg: 'Usted no tiene permisos para acceder',",
                                                    "                        buttons: Ext.Msg.OK,",
                                                    "                        icon: Ext.MessageBox.ERROR",
                                                    "                    });",
                                                    "",
                                                    "                }",
                                                    "            },",
                                                    "",
                                                    "            failure: function(response, opts)",
                                                    "            {",
                                                    "                Ext.Msg.show({",
                                                    "                    title:'Error',",
                                                    "                    msg: 'Usuario o clave mal ingresados',",
                                                    "                    buttons: Ext.Msg.OK,",
                                                    "                    icon: Ext.MessageBox.WARNING",
                                                    "                });",
                                                    "            }",
                                                    "        });",
                                                    "}",
                                                    "else",
                                                    "{",
                                                    "    Ext.Msg.alert('Error', 'Debe llenar todos los campos');",
                                                    "}"
                                                ],
                                                "name": "click",
                                                "scope": "me"
                                            },
                                            "configAlternates": {
                                                "fn": "string",
                                                "implHandler": "code",
                                                "name": "string",
                                                "scope": "string"
                                            },
                                            "name": "onButtonClick",
                                            "designerId": "2b39224f-d73d-473b-9374-5884d09a1ee1"
                                        }
                                    ]
                                },
                                {
                                    "type": "Ext.form.field.Display",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "fieldStyle": "fontFamily : Georgia; font-style: italic; font-size: 14px",
                                        "value": "Desarrollado por la Dirección Informática de la PUCE"
                                    },
                                    "configAlternates": {
                                        "value": "string",
                                        "style": "string",
                                        "fieldStyle": "string"
                                    },
                                    "name": "MyDisplayField",
                                    "designerId": "40c4c411-d9b7-45b0-be4c-bc3d59157d19"
                                },
                                {
                                    "type": "Ext.form.field.Hidden",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "fieldLabel": "Aplicacion",
                                        "name": "aplicacion",
                                        "value": [
                                            "reservas_puce"
                                        ]
                                    },
                                    "configAlternates": {
                                        "fieldLabel": "string",
                                        "name": "string",
                                        "value": "object"
                                    },
                                    "name": "MyHiddenField",
                                    "designerId": "7410ab2d-8252-4ce5-b10d-a3f6ff003639"
                                }
                            ]
                        }
                    ]
                }
            ]
        }
    ]
}